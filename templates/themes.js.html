<script>
  $(document).ready(function() {

    $('.dark_theme').html(window.localStorage.getItem('theme_icon'))
    document.getElementById("nav").classList.add(window.localStorage.getItem('nav-class'));
    document.getElementById('content').classList.add(window.localStorage.getItem('body-class'));
    var cards=document.querySelectorAll('#other-components')
    for(var i = 0; i < cards.length; i++) {
      cards[i].classList.add(window.localStorage.getItem('other-components-bg'),window.localStorage.getItem('other-components-text'));
      }

      if(document.getElementById("table")){
        document.getElementById("table").classList.add(window.localStorage.getItem('table'));
        }
    
    function DarkModeOnOff(dark){
       console.log('in function')

    if (dark==true){    
      
      window.localStorage.setItem('theme_icon',`<span class="btn btn-outline-light" style="font-size: 1rem;">Dark Mode:ON</span>`)
      window.localStorage.setItem('nav-class','navbar-dark')
      window.localStorage.setItem('body-class','text-light')
      window.localStorage.setItem('other-components-bg','bg-dark')
      window.localStorage.setItem('other-components-text','text-light')
      window.localStorage.setItem('table','table-dark')
    }
    else{
        window.localStorage.setItem('theme_icon',`<span class="btn btn-outline-dark" style="font-size: 1rem;">Dark Mode:OFF</span>`)
        window.localStorage.setItem('body-class','text-dark')
        window.localStorage.setItem('nav-class','navbar-light')
        window.localStorage.setItem('other-components-bg','bg-light')
        window.localStorage.setItem('other-components-text','text-dark')
        window.localStorage.setItem('table','table-light')
    }                   
  }
    $('.dark_theme').click(function(event) {
      event.preventDefault();
      $.ajax({
        type:'GET',
        url:'/theme/',
        success: function(response){
          console.log(response.dark);
          
          DarkModeOnOff(response.dark);
          document.location.reload();              
          
        },
        error:function(errorData){
          console.log(errorData);
        }
      })  
    })
  });
  </script>